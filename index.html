<!-- CRUD walkthrough: https://www.codemag.com/article/1511031/CRUD-in-HTML-JavaScript-and-jQuery -->

<!--
    reasonable{
        Annual Requirement: 2100;
        Pro Bono: 30;
        Beginning Month: Jan;

        hrs/mo: ~180-200;
    }
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hours Calculator</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/knopf.css">

</head>
<body class="wrapper">
    <h1>Monthly Billable Hours Calculator</h1>

    <div id="outputs-card">
        <div class="chart">
            <canvas id="myChart"></canvas>
        </div>
    </div>

    <!-- Header Inputs -->
    <div>
        <div>
            <div>Annual Billable Hour Requirement</div>
            <input required type="number" id="BillHrReq" placeholder="2300">
        </div>
        <div>
            <div>Other Hours Counting Towards Requirement (Pro Bono, etc.)</div>
            <input type="number" id="PBHrs" placeholder="20">
        </div>
        <div>
            <div>Beginning Month of the Billable Year</div>
            <!-- <input id="billableYearMonth" type="date" > -->
            <select id="billableYearMonth" class="billableYearMonth">
                <option value="1">January</option>
                <option value="2">February</option>
                <option value="3">March</option>
                <option value="4">April</option>
                <option value="5">May</option>
                <option value="6">June</option>
                <option value="7">July</option>
                <option value="8">August</option>
                <option value="9">September</option>
                <option value="10">October</option>
                <option value="11">November</option>
                <option value="12">December</option>
            </select>
            </div>
        </div>
    <!-- Table -->
        <table id="hrsTable" >
            <thead>
                <tr>
                    <th>Month</th>
                    <th>Billable Hours</th>
                    <th>Pro Bono & Other Hours</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>January</td>
                    <td style="padding: 0;">
                        <input class="billable" type="number" placeholder="0">
                    </td>
                    <td style="padding: 0;">
                        <input class="probono" type="number" placeholder="0">
                    </td>
                </tr>
                <tr>
                    <td>February</td>
                    <td style="padding: 0;">
                        <input class="billable" type="number" placeholder="0">
                    </td>
                    <td style="padding: 0;">
                        <input class="probono" type="number" placeholder="0">
                    </td>
                </tr>
                <tr>
                    <td>March</td>
                    <td style="padding: 0;">
                        <input class="billable" type="number" placeholder="0">
                    </td>
                    <td style="padding: 0;">
                        <input class="probono" type="number" placeholder="0">
                    </td>
                </tr>
                <tr>
                    <td>April</td>
                    <td style="padding: 0;">
                        <input class="billable" type="number" placeholder="0">
                    </td>
                    <td style="padding: 0;">
                        <input class="probono" type="number" placeholder="0">
                    </td>
                </tr>
                <tr>
                    <td>May</td>
                    <td style="padding: 0;">
                        <input class="billable" type="number" placeholder="0">
                    </td>
                    <td style="padding: 0;">
                        <input class="probono" type="number" placeholder="0">
                    </td>
                </tr>
                <tr>
                    <td>June</td>
                    <td style="padding: 0;">
                        <input class="billable" type="number" placeholder="0">
                    </td>
                    <td style="padding: 0;">
                        <input class="probono" type="number" placeholder="0">
                    </td>
                </tr>
                <tr>
                    <td>July</td>
                    <td style="padding: 0;">
                        <input class="billable" type="number" placeholder="0">
                    </td>
                    <td style="padding: 0;">
                        <input class="probono" type="number" placeholder="0">
                    </td>
                </tr>
                <tr>
                    <td>August</td>
                    <td style="padding: 0;">
                        <input class="billable" type="number" placeholder="0">
                    </td>
                    <td style="padding: 0;">
                        <input class="probono" type="number" placeholder="0">
                    </td>
                </tr>
                <tr>
                    <td>September</td>
                    <td style="padding: 0;">
                        <input class="billable" type="number" placeholder="0">
                    </td>
                    <td style="padding: 0;">
                        <input class="probono" type="number" placeholder="0">
                    </td>
                </tr>
                <tr>
                    <td>October</td>
                    <td style="padding: 0;">
                        <input class="billable" type="number" placeholder="0">
                    </td>
                    <td style="padding: 0;">
                        <input class="probono" type="number" placeholder="0">
                    </td>
                </tr>
                <tr>
                    <td>November</td>
                    <td style="padding: 0;">
                        <input class="billable" type="number" placeholder="0">
                    </td>
                    <td style="padding: 0;">
                        <input class="probono" type="number" placeholder="0">
                    </td>
                </tr>
                <tr>
                    <td>December</td>
                    <td style="padding: 0;">
                        <input class="billable" type="number" placeholder="0">
                    </td>
                    <td style="padding: 0;">
                        <input class="probono" type="number" placeholder="0">
                    </td>
                </tr>
            </tbody>
        </table>

    <!-- Submit-->
    <div class="buttons">
        <button id="calculate" class="knopf" onclick="calcHours()" >Calculate</button>
        <!-- <a class="allsides-5" onclick="calcHours()">Calculate</a> -->
        <button id="reset" class="knopf flat" onclick="resetFields()" style="margin-left: 15px;">Reset</button>
        <!-- <a  class="allsides-5" onclick="resetFields()">Reset</a> -->
    </div>

    <!-- Outputs -->
    <div id="outputs" class="outputs">
        <!-- TODO: add graphic to show visualization of how much time till hitting hours, maybe a wheel or %bar-->
        <!-- inspiration:   https://dribbble.com/shots/15530589/attachments/7310456?mode=media 
                            https://dribbble.com/shots/7598410-Fitness-dashboard
                            https://dribbble.com/shots/14041231/attachments/5659064?mode=media
                        -->
        <div class="inline">
            <div>Months Remaining:</div>
            <div id="monthsLeft" class="bold">0</div>
        </div>
        <div class="inline">
            <div>Hours Remaining:</div>
            <div id="hrsLeftBillable" class="bold">0</div>
        </div>
        <div class="inline">
            <div>Pro Bono Hours Remaining:</div>
            <div id="hrsLeftProBono" class="bold">0</div>
        </div>
        <div class="inline">
            <div>Hours Remaining Per Month:</div>
            <div id="hrsLeftPerMonth" class="bold">0</div>
        </div>
        <div id="instructions">
            <!-- TODO: add section on how to add to iphone home screen and/or bookmark -->
        </div>
    </div>
</body>

<script src="./js/jquery-3.2.1.min.js"></script>
<script src="./js/app.js" type="text/JavaScript"></script>
<script src="./js/chart.js"></script>
<script>
    //Utils
    function transparentize(value, opacity) {
        opacity = opacity === undefined ? 1 : opacity;
        return value.split('\)')[0]+","+opacity+")";
    }

    const CHART_COLORS = {
        red: 'rgb(255, 99, 132)',
        orange: 'rgb(255, 159, 64)',
        yellow: 'rgb(255, 205, 86)',
        green: 'rgb(75, 192, 192)',
        blue: 'rgb(54, 162, 235)',
        purple: 'rgb(153, 102, 255)',
        grey: 'rgb(201, 203, 207)'
    };


    //Setup
    const DATA_COUNT = 1;
    const NUMBER_CFG = {count: DATA_COUNT, min: 0, max: 730};
    const labels = [
    'January',
    'February',
    'March',
    'April',
    'May',
    'June',
    'July',
    'August',
    'September',
    'October',
    'November',
    'December'
    ];
    const _data = [120, 150, 197, 35, 110, 115, 75, 110, 95, 100, 100, 100];
    const data = {
        labels: labels,
        datasets: [{
            label: 'Hours',
            borderColor: 'rgb(255, 99, 132)',
            borderWidth: .2,
            backgroundColor: [
                transparentize(CHART_COLORS.red, 0.5),
                transparentize(CHART_COLORS.orange, 0.5),
                transparentize(CHART_COLORS.yellow, 0.5),
                transparentize(CHART_COLORS.green, 0.5),
                transparentize(CHART_COLORS.blue, 0.5),
                transparentize(CHART_COLORS.purple, 0.5),
                transparentize(CHART_COLORS.red, 0.5),
                transparentize(CHART_COLORS.orange, 0.5),
                transparentize(CHART_COLORS.yellow, 0.5),
                // transparentize(CHART_COLORS.green, 0.5),
                // transparentize(CHART_COLORS.blue, 0.5),
                // transparentize(CHART_COLORS.purple, 0.5),
                transparentize(CHART_COLORS.grey, 0.2),
                transparentize(CHART_COLORS.grey, 0.2),
                transparentize(CHART_COLORS.grey, 0.2),
            ],
            data: _data,
        }]
    };

    //Config
    const config = {
        type: 'polarArea',
        data: data,
        options: {
            responsive: true,
            plugins: {
                legend: {
                    display: false,
                    position: 'top',
                },
                title: {
                    display: true,
                    text: 'Hours',
                    // position: 'bottom',
                }
            }
        }
    };

    //render
    var myChart = new Chart(
        document.getElementById('myChart'),
        config
    );
</script>

</html>